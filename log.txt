2024-08-22 09:50:00,487 - telethon.client.updates - ERROR - Unhandled exception on get_url
Traceback (most recent call last):
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: medias

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/telethon/client/updates.py", line 570, in _dispatch_update
    await callback(event)
  File "/home/mohammad/Documents/code/projects/PlusSaver/modules/handlers/handlers.py", line 441, in get_url
    if not await check_and_send_media_from_db(event, url):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/modules/handlers/handlers.py", line 64, in check_and_send_media_from_db
    media = session.query(Media).filter_by(media_downloaded_url=str(url)).first()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2728, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: medias
[SQL: SELECT medias.media_downloaded_url AS medias_media_downloaded_url, medias.message_id AS medias_message_id, medias.channel_id AS medias_channel_id, medias.id AS medias_id 
FROM medias 
WHERE medias.media_downloaded_url = ?
 LIMIT ? OFFSET ?]
[parameters: ('https://www.pinterest.com/pin/1106055989724578819/', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-08-22 09:50:21,141 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2024-08-22 09:50:21,142 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
2024-08-22 09:50:21,142 - telethon.network.mtprotosender - INFO - Not disconnecting (already have no connection)
2024-08-22 09:51:03,421 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 09:51:04,141 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 09:51:18,716 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 09:51:47,236 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2024-08-22 09:51:47,237 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
2024-08-22 09:51:47,238 - telethon.network.mtprotosender - INFO - Not disconnecting (already have no connection)
2024-08-22 09:52:05,978 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 09:52:06,211 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 09:52:37,245 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2024-08-22 09:52:37,246 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
2024-08-22 09:52:37,247 - telethon.network.mtprotosender - INFO - Not disconnecting (already have no connection)
2024-08-22 09:53:35,412 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2024-08-22 09:53:35,413 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
2024-08-22 09:53:35,413 - telethon.network.mtprotosender - INFO - Not disconnecting (already have no connection)
2024-08-22 09:54:05,921 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 09:54:06,127 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 09:54:06,316 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 09:56:13,082 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2024-08-22 09:56:13,083 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
2024-08-22 09:56:13,084 - telethon.network.mtprotosender - INFO - Not disconnecting (already have no connection)
2024-08-22 09:59:42,017 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2024-08-22 09:59:42,018 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
2024-08-22 09:59:42,018 - telethon.network.mtprotosender - INFO - Not disconnecting (already have no connection)
2024-08-22 09:59:55,934 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 09:59:56,110 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 10:01:48,675 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 10:01:48,833 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:01:49,529 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 10:02:23,804 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 10:02:28,487 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:02:53,691 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:02:55,536 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:02:59,213 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:03:02,514 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 10:03:03,013 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:03:22,282 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:03:29,182 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 10:03:30,924 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:06:53,268 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2024-08-22 10:06:53,269 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
2024-08-22 10:06:53,269 - telethon.network.mtprotosender - INFO - Not disconnecting (already have no connection)
2024-08-22 10:08:47,379 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2024-08-22 10:08:47,380 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
2024-08-22 10:08:47,381 - telethon.network.mtprotosender - INFO - Not disconnecting (already have no connection)
2024-08-22 10:09:30,013 - telethon.client.updates - ERROR - Unhandled exception on get_url
Traceback (most recent call last):
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/telethon/client/updates.py", line 570, in _dispatch_update
    await callback(event)
  File "/home/mohammad/Documents/code/projects/PlusSaver/modules/handlers/handlers.py", line 420, in get_url
    await send_media(event, music)
  File "/home/mohammad/Documents/code/projects/PlusSaver/modules/handlers/handlers.py", line 34, in send_media
    await client.send_file(event.chat_id, file=media.PATH, caption=Strings.media_geted(media.TITLE, media.CAPTION), reply_to=event.id)
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/telethon/client/uploads.py", line 430, in send_file
    return self._get_response_message(request, await self(request), entity)
                                               ^^^^^^^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/telethon/client/users.py", line 30, in __call__
    return await self._call(self._sender, request, ordered=ordered)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/telethon/client/users.py", line 87, in _call
    result = await future
             ^^^^^^^^^^^^
telethon.errors.rpcerrorlist.WebpageCurlFailedError: Failure while fetching the webpage with cURL (caused by SendMediaRequest)
2024-08-22 10:10:06,177 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2024-08-22 10:10:06,178 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
2024-08-22 10:10:06,178 - telethon.network.mtprotosender - INFO - Not disconnecting (already have no connection)
2024-08-22 10:10:23,665 - telethon.client.updates - ERROR - Unhandled exception on get_url
Traceback (most recent call last):
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/telethon/client/updates.py", line 570, in _dispatch_update
    await callback(event)
  File "/home/mohammad/Documents/code/projects/PlusSaver/modules/handlers/handlers.py", line 420, in get_url
    await send_media(event, music)
  File "/home/mohammad/Documents/code/projects/PlusSaver/modules/handlers/handlers.py", line 34, in send_media
    await client.send_file(event.chat_id, file=media.PATH, caption=Strings.media_geted(media.TITLE, media.CAPTION), reply_to=event.id)
  File "/home/mohammad/Documents/code/projects/PlusSaver/venv/lib/python3.11/site-packages/telethon/client/uploads.py", line 363, in send_file
    raise TypeError('Cannot use {!r} as file'.format(file))
TypeError: Cannot use None as file
2024-08-22 10:11:16,255 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2024-08-22 10:11:16,256 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
2024-08-22 10:11:16,256 - telethon.network.mtprotosender - INFO - Not disconnecting (already have no connection)
2024-08-22 10:12:16,158 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:23:42,248 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 10:25:01,752 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:25:17,336 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:25:35,409 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 10:25:35,607 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:26:35,006 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 10:26:36,184 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 10:27:06,070 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:27:07,599 - telethon.client.updates - INFO - Got difference for account updates
2024-08-22 10:27:09,335 - telethon.client.updates - INFO - Got difference for channel 1651163544 updates
2024-08-22 10:31:51,246 - telethon.network.mtprotosender - INFO - Disconnecting from 149.154.167.92:443/TcpFull...
2024-08-22 10:31:51,247 - telethon.network.mtprotosender - INFO - Disconnection from 149.154.167.92:443/TcpFull complete!
2024-08-22 10:31:51,248 - telethon.network.mtprotosender - INFO - Not disconnecting (already have no connection)
